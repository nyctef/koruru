<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Soundboard (audiosurf clone) (temporary name): src/objects/cObjectManager.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>src/objects/cObjectManager.cpp</h1><a href="cObjectManager_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#include "<a class="code" href="cObjectManager_8h.html">cObjectManager.h</a>"</span>
<a name="l00002"></a>00002 
<a name="l00003"></a><a class="code" href="classcObjectManager.html#79e5fa52d34ee9d9c47b097ee6c0036f">00003</a> <a class="code" href="classcObjectManager.html#79e5fa52d34ee9d9c47b097ee6c0036f" title="Default contructor.">cObjectManager::cObjectManager</a>(<span class="keywordtype">int</span> nmode)
<a name="l00004"></a>00004 { <a class="code" href="classcObjectManager.html#8e8b597b062b4d755ceda8570c102217">mode</a> = nmode;
<a name="l00005"></a>00005 }
<a name="l00006"></a>00006 
<a name="l00007"></a><a class="code" href="classcObjectManager.html#c2fa5ba080bfe232fbbe985835b50656">00007</a> <a class="code" href="classcObjectManager.html#c2fa5ba080bfe232fbbe985835b50656" title="Empty destructor.">cObjectManager::~cObjectManager</a>()
<a name="l00008"></a>00008 {
<a name="l00009"></a>00009 }
<a name="l00010"></a>00010 
<a name="l00011"></a><a class="code" href="classcObjectManager.html#aa0b3fcef5ec4deaf32bbb4cbd579163">00011</a> <span class="keywordtype">void</span> <a class="code" href="classcObjectManager.html#aa0b3fcef5ec4deaf32bbb4cbd579163" title="Add a generic object to the manager.">cObjectManager::add</a>(<a class="code" href="classiObject.html" title="Provides a basic object interface.">iObject</a>* <span class="keywordtype">object</span>) {
<a name="l00012"></a>00012         <a class="code" href="classcObjectManager.html#f59aff08df122deb19d9c844eb88401d" title="List of all objects managed by cObjectManager.">objectlist</a>.push_back(<span class="keywordtype">object</span>);
<a name="l00013"></a>00013 }
<a name="l00014"></a>00014 
<a name="l00015"></a><a class="code" href="classcObjectManager.html#9aaced02c13a87beb0375623ec08d5c1">00015</a> <span class="keywordtype">void</span> <a class="code" href="classcObjectManager.html#9aaced02c13a87beb0375623ec08d5c1" title="Add a pickup to the manager.">cObjectManager::addpickup</a>(<a class="code" href="classcPickup.html" title="Encapsulates one pickup.">cPickup</a>* pickup) {
<a name="l00016"></a>00016         <a class="code" href="classcObjectManager.html#6490b35e5205549842a7e6a9ff615a64" title="List of pickups.">pickuplist</a>.push_back(pickup);
<a name="l00017"></a>00017         <span class="keyword">add</span>(pickup);
<a name="l00018"></a>00018 }
<a name="l00019"></a>00019 
<a name="l00020"></a><a class="code" href="classcObjectManager.html#1c4462f1c10ddbc5b4196e1b466bd82e">00020</a> <span class="keywordtype">void</span> <a class="code" href="classcObjectManager.html#1c4462f1c10ddbc5b4196e1b466bd82e">cObjectManager::addparticles</a>(<a class="code" href="classcParticleSystem.html">cParticleSystem</a>* particles) {
<a name="l00021"></a>00021         <a class="code" href="classcObjectManager.html#c68cbbfa62d4c9e122b6a2c9866b5d9b" title="List of particle systems.">particleslist</a>.push_back(particles);
<a name="l00022"></a>00022         <span class="keyword">add</span>(particles); 
<a name="l00023"></a>00023 }
<a name="l00024"></a>00024 
<a name="l00025"></a><a class="code" href="classcObjectManager.html#e1d3757a0dc2d6fd79eb8d4bfc2bbe04">00025</a> <span class="keywordtype">void</span> <a class="code" href="classcObjectManager.html#e1d3757a0dc2d6fd79eb8d4bfc2bbe04" title="Update objects controlled by the manager, check for collisions etc.">cObjectManager::update</a>() {
<a name="l00026"></a>00026         
<a name="l00027"></a>00027                 <span class="comment">// update all (generic) objects </span>
<a name="l00028"></a>00028         list&lt; iObject* &gt;::iterator <a class="code" href="classcObjectManager.html#68ce55398d1dc0129dff9f278e684636" title="Iterator for objectlist.">it</a>;  
<a name="l00029"></a>00029    <span class="keywordflow">for</span>(it=<a class="code" href="classcObjectManager.html#f59aff08df122deb19d9c844eb88401d" title="List of all objects managed by cObjectManager.">objectlist</a>.begin(); it != <a class="code" href="classcObjectManager.html#f59aff08df122deb19d9c844eb88401d" title="List of all objects managed by cObjectManager.">objectlist</a>.end(); it++) {
<a name="l00030"></a>00030          (*it)-&gt;update();
<a name="l00031"></a>00031          <span class="keywordflow">if</span> ((*it)-&gt;deleteme == 1) {
<a name="l00032"></a>00032                 it=<a class="code" href="classcObjectManager.html#f59aff08df122deb19d9c844eb88401d" title="List of all objects managed by cObjectManager.">objectlist</a>.erase(it);
<a name="l00033"></a>00033          }
<a name="l00034"></a>00034    }
<a name="l00035"></a>00035 }
<a name="l00036"></a>00036 
<a name="l00037"></a><a class="code" href="classcObjectManager.html#c0afcba972ceb973e07e1c2cf9c85b88">00037</a> <span class="keywordtype">void</span> <a class="code" href="classcObjectManager.html#c0afcba972ceb973e07e1c2cf9c85b88" title="Draw objects controlled by the manager.">cObjectManager::draw</a>() {
<a name="l00038"></a>00038         
<a name="l00039"></a>00039         <span class="keywordflow">if</span> (<a class="code" href="classcObjectManager.html#f59aff08df122deb19d9c844eb88401d" title="List of all objects managed by cObjectManager.">objectlist</a>.size() != 0) {
<a name="l00040"></a>00040           <span class="keywordflow">for</span>(<a class="code" href="classcObjectManager.html#68ce55398d1dc0129dff9f278e684636" title="Iterator for objectlist.">it</a>=<a class="code" href="classcObjectManager.html#f59aff08df122deb19d9c844eb88401d" title="List of all objects managed by cObjectManager.">objectlist</a>.begin(); <a class="code" href="classcObjectManager.html#68ce55398d1dc0129dff9f278e684636" title="Iterator for objectlist.">it</a> != <a class="code" href="classcObjectManager.html#f59aff08df122deb19d9c844eb88401d" title="List of all objects managed by cObjectManager.">objectlist</a>.end(); <a class="code" href="classcObjectManager.html#68ce55398d1dc0129dff9f278e684636" title="Iterator for objectlist.">it</a>++) {
<a name="l00041"></a>00041                 glPushMatrix();
<a name="l00042"></a>00042                 (*it)-&gt;draw();
<a name="l00043"></a>00043                 glPopMatrix();
<a name="l00044"></a>00044           }
<a name="l00045"></a>00045         }
<a name="l00046"></a>00046                 <a class="code" href="classcObjectManager.html#60b3e75bcf4694692357680b76dab58b" title="The playtable for the game.">playtable</a>.<a class="code" href="classcPlayTable.html#18b298f56e3d9051287deda5ef42c8d5" title="Draw the table.">draw</a>();
<a name="l00047"></a>00047         
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 }
<a name="l00050"></a>00050 
<a name="l00051"></a><a class="code" href="classcObjectManager.html#52de81c8430e3647c6585ba98fed58e9">00051</a> <span class="keywordtype">void</span> <a class="code" href="classcObjectManager.html#52de81c8430e3647c6585ba98fed58e9">cObjectManager::collidepickups</a>() {
<a name="l00052"></a>00052         
<a name="l00053"></a>00053 
<a name="l00054"></a>00054         
<a name="l00055"></a>00055 }
<a name="l00056"></a>00056 
<a name="l00057"></a><a class="code" href="classcObjectManager.html#01aaa756f63e961442080dff42d3e92c">00057</a> <span class="keywordtype">void</span> <a class="code" href="classcObjectManager.html#01aaa756f63e961442080dff42d3e92c">cObjectManager::addpickups</a>(<span class="keywordtype">int</span> <a class="code" href="classcObjectManager.html#8e8b597b062b4d755ceda8570c102217">mode</a>) {
<a name="l00058"></a>00058 
<a name="l00059"></a>00059 }
<a name="l00060"></a>00060 
<a name="l00061"></a><a class="code" href="classcObjectManager.html#c9d87abd3f7482c6927a71dc166dee0c">00061</a> <span class="keywordtype">void</span> <a class="code" href="classcObjectManager.html#c9d87abd3f7482c6927a71dc166dee0c">cObjectManager::_addpickups</a>() {
<a name="l00062"></a>00062         
<a name="l00063"></a>00063         <span class="keyword">static</span> <span class="keywordtype">int</span> onepickup = 0;
<a name="l00064"></a>00064         <a class="code" href="classcPickup.html" title="Encapsulates one pickup.">cPickup</a>* newpickup;
<a name="l00065"></a>00065         newpickup = <span class="keyword">new</span> <a class="code" href="classcPickup.html" title="Encapsulates one pickup.">cPickup</a>(<a class="code" href="classcObjectManager.html#d3296bb90fb00e17d263fddec1307603" title="The current pickup (lane) position.">currentposition</a>, 0, <a class="code" href="classcObjectManager.html#4dfda960f01e3221a5514ac97605a015" title="The current pickup colour.">currentcolour</a>, <a class="code" href="cFlyingPickup_8h.html#ebd8cfefc7021ac352cef3e405e2b22e9b0b4a95b99523966e0e34ffdadac9da">DOWN</a>); <span class="comment">// normal</span>
<a name="l00066"></a>00066         <span class="comment">//newpickup = new cPickup(currentposition, 0, 1, DOWN); // use this for all red pickups. Debugging purposes.</span>
<a name="l00067"></a>00067         <span class="comment">//if (onepickup==0) // use this for only one pickup. Debugging purposes.</span>
<a name="l00068"></a>00068         <a class="code" href="classcObjectManager.html#9aaced02c13a87beb0375623ec08d5c1" title="Add a pickup to the manager.">addpickup</a>(newpickup); 
<a name="l00069"></a>00069         onepickup = 1;
<a name="l00070"></a>00070         
<a name="l00071"></a>00071 }
<a name="l00072"></a>00072 
<a name="l00073"></a><a class="code" href="classcObjectManager.html#94a937218eb47b78502dcbf44dd0d108">00073</a> <span class="keywordtype">void</span> <a class="code" href="classcObjectManager.html#94a937218eb47b78502dcbf44dd0d108" title="Remove game objects; reset game essentially.">cObjectManager::init</a>(<span class="keywordtype">int</span> nmode) {
<a name="l00074"></a>00074 
<a name="l00075"></a>00075         <span class="comment">// OH EM GEE MEMORY LEAKS</span>
<a name="l00076"></a>00076         <a class="code" href="classcObjectManager.html#f59aff08df122deb19d9c844eb88401d" title="List of all objects managed by cObjectManager.">objectlist</a>.clear();
<a name="l00077"></a>00077         <a class="code" href="classcObjectManager.html#6490b35e5205549842a7e6a9ff615a64" title="List of pickups.">pickuplist</a>.clear();
<a name="l00078"></a>00078         <a class="code" href="classcObjectManager.html#c68cbbfa62d4c9e122b6a2c9866b5d9b" title="List of particle systems.">particleslist</a>.clear();
<a name="l00079"></a>00079         <a class="code" href="classcObjectManager.html#60b3e75bcf4694692357680b76dab58b" title="The playtable for the game.">playtable</a> = *(<span class="keyword">new</span> <a class="code" href="classcPlayTable.html" title="Controls the play table for a game.">cPlayTable</a>(3,7));
<a name="l00080"></a>00080         <a class="code" href="classcObjectManager.html#8e8b597b062b4d755ceda8570c102217">mode</a> = nmode;
<a name="l00081"></a>00081         
<a name="l00082"></a>00082 }
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Jul 7 09:39:39 2008 for Soundboard (audiosurf clone) (temporary name) by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
